<#include "/admin/layout.html"> 
<@layout>
   <link href="${ctx!}/admin/css/plugins/jQueryUI/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">
    <!-- Data Tables -->
    <link href="${ctx!}/admin/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="${ctx!}/admin/css/style.css" rel="stylesheet">
    
    <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>主机添加</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="${ctx!}/admin/index">主页</a>
                        </li>
                        <li>
                            <strong>主机管理</strong>
                        </li>
                    </ol>
                </div>
                <div class="col-lg-2">

                </div>
            </div>
			<!-- datatables -->
			              <div class="row">
                    <div class="col-lg-12">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                               
                                <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="table_data_tables.html#">
                                        <i class="fa fa-wrench"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-user">
                                        <li><a href="table_data_tables.html#">选项1</a>
                                        </li>
                                        <li><a href="table_data_tables.html#">选项2</a>
                                        </li>
                                    </ul>
                                    <a class="close-link">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <div class="">
                                    <button class="btn btn-primary " data-toggle="modal" data-target="#addModal" data-backdrop="false">添加主机</button>
                                         <div class="modal inmodal" id="addModal" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content animated bounceInRight">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span>
                                                </button>
                                                <i class="fa fa-laptop modal-icon"></i>
                                                <h4 class="modal-title">添加主机</h4>
                                                
                                        </div>
                                        <div class="modal-body" ms-controller="addMacCtrl">
                                        	<form action="" id="addForm">
                                              <div class="form-group">
                                              <div id="errorContainer" ms-visible="errMsg!=''" style="color:red">{{errMsg}}<span id="errMsg"></span></div>
                                              
                                              	<label>主机ip</label>
                                              	<input type="text" placeholder="请输入主机ip" class="form-control" id="ip" name="ip" ms-duplex="data.ip" >
                                              </div> 
                                               <div class="form-group">
                                              	<label>主机角色</label>
                                                <select ms-duplex="data.role">
                                                <option value="namenode"  >namenode</option>
                                                <option  value="datanode">datanode</option>
                                                </select>
                                              </div> 
                                              <div class="form-group">
                                              	<label>主机名</label>
                                              	<input type="text" placeholder="请输入主机名" class="form-control" id="hostname" name="hostname" ms-duplex="data.hostname" >
                                              </div> 
                                              <div class="form-group">
                                              	<label>主机用户名</label>
                                              	<input type="text" placeholder="请输入用户名" class="form-control" id="username" name="username" ms-duplex="data.username" >
                                              </div> 
                                              <div class="form-group">
                                              	<label>主机密码</label>
                                              	<input type="password" placeholder="请输入主机密码" class="form-control" id="password" name="password" ms-duplex="data.password" >
                                              </div> 
                                              <div class="modal-footer">
                                            <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                                            <button type="button" class="btn btn-primary" ms-click="submit">保存</button>
                                        	</div>
                                              </form>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                           </div>
                                <table class="table table-striped table-bordered table-hover " id="editable">
                                    <tbody>
                                    <thead>
                                        <tr>
                                            <th>ip</th>
                                            <th>hostname</th>
                                            <th>username</th>
                                            <th>role</th>
                                            <th>operation</th>
                                        </tr>
                                    </thead>
                                  
                                        
                                   </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>



<!-- Data Tables -->
    
    

    <!-- Data Tables -->
   
  
    <script type="text/javascript">
    var rootPath="${ctx!}";
    var data;
   	var oTable;
    $(document).ready(function () {
        /* Init DataTables */
         $.ajax({
    	  url: '${ctx!}/admin/machine/getMacList',
    	  type: 'GET',
    	  dataType: 'json',
    	  error: function(){
    	    alert('Error loading XML document');
    	  },
    	  success: function(json){
    	    // do something with xml
    	      data=json;
    		  oTable = $('#editable').dataTable({
    	        	data: data
    	        });
    	  }
    	});
        
        /* Apply the jEditable handlers to the table */
    });
    
	</script>
	
	<script src="${ctx!}/assets/avalon/avalon.min.js"></script>
    <script src="${ctx!}/admin/machine/machine.js"></script>
    
</@layout>
